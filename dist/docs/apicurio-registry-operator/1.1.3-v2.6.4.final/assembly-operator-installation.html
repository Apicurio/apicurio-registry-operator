<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Installing Apicurio Registry Operator using the OperatorHub :: Apicurio Registry Operator PREVIEW</title>
    <link rel="canonical" href="https://www.apicur.io/registry/docs/apicurio-registry-operator/1.1.3-v2.6.4.final/assembly-operator-installation.html">
    <meta name="generator" content="Antora 3.1.9">
    <link rel="stylesheet" type="text/css" href="//fonts.googleapis.com/css?family=Open+Sans" />
    <link rel="stylesheet" href="../../_/css/site.css">
    <link rel="stylesheet" href="https://www.apicur.io/css/rhbar.css">
    <link rel="shortcut icon" href="https://www.apicur.io/images/favicon.ico" type="image/x-icon" integrity="sha384-if9KH+NQ2dMhdrWu+INnJTcvG6riRakUAnbhecX5a7voubrapo7ouFGS+GYZ/N4P" crossorigin="anonymous"/>
  </head>
  <body class="article">
<div class="masthead-wrapper">
    <div class="search-box">
        <input id="search-input" type="text" placeholder="Search docs">
    </div>
    <div class="masthead">
        <div class="logo-wrapper">
            <a href="/"><img src="https://www.apicur.io/images/apicurio_headerlogo.png" class="project-logo"
                    title="Apicurio"></a>
        </div>
        <div class="menu-wrapper">
            <ul id="menu" class="menu">
                <li>
                    <a href="/studio/" id="menu-item-studio">Studio</a>
                </li>
                <li>
                    <a href="/registry/" id="menu-item-registry">Registry</a>
                </li>
                <li>
                    <a href="/datamodels/">Data Models</a>
                </li>
                <li>
                    <a href="/apicurito/">Apicurito</a>
                </li>
                <li>
                    <a href="/blog/">Blog</a>
                </li>
                <li>
                    <a href="/contact/">Contact</a>
                </li>
                <li>
                    <a href="https://github.com/apicurio">Fork</a>
                </li>
            </ul>
        </div>
    </div>
</div>
<script>
    var currentURL = window.location.href;
    var studioAnchor = document.getElementById("menu-item-studio");
    var registryAnchor = document.getElementById("menu-item-registry");

    if (currentURL.includes("studio")) {
        studioAnchor.classList.add("active");
    } else if (currentURL.includes("registry")) {
        registryAnchor.classList.add("active");
    }
</script>
<div class="body">
<div class="nav-container" data-component="apicurio-registry-operator" data-version="1.1.3-v2.6.4.final">
  <aside class="nav">
    <div class="panels">
<div class="nav-panel-menu is-active" data-panel="menu">
  <nav class="nav-menu">
    <h3 class="title"><a href="index.html">Apicurio Registry Operator</a></h3>
<ul class="nav-list">
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="assembly-operator-quickstart.html">Apicurio Registry Operator quickstart</a>
  </li>
  <li class="nav-item is-current-page" data-depth="1">
    <a class="nav-link" href="assembly-operator-installation.html">Installing Apicurio Registry Operator using the OperatorHub</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="assembly-registry-storage.html">Configuring Apicurio Registry storage</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="assembly-registry-maintenance.html">Configuring and managing Apicurio Registry deployment</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="assembly-operator-configuration.html">Apicurio Registry Operator configuration reference</a>
  </li>
</ul>
  </li>
</ul>
  </nav>
</div>
<div class="nav-panel-explore" data-panel="explore">
  <div class="context">
    <span class="title">Apicurio Registry Operator</span>
    <span class="version">1.1.3-v2.6.4.final</span>
  </div>
  <ul class="components">
    <li class="component is-current">
      <span class="title">Apicurio Registry Operator</span>
      <ul class="versions">
        <li class="version is-current">
          <a href="index.html">1.1.3-v2.6.4.final</a>
        </li>
      </ul>
    </li>
  </ul>
</div>
    </div>
  </aside>
</div>
<main class="article">
<div class="toolbar" role="navigation">
<button class="nav-toggle"></button>
  <a href="index.html" class="home-link"></a>
<nav class="breadcrumbs" aria-label="breadcrumbs">
  <ul>
    <li><a href="index.html">Apicurio Registry Operator</a></li>
    <li><a href="assembly-operator-installation.html">Installing Apicurio Registry Operator using the OperatorHub</a></li>
  </ul>
</nav>
  <div class="edit-this-page"><a href="https://github.com/Apicurio/apicurio-registry-operator/tree/main/docs">Edit this Page</a></div>
  </div>
  <div class="content">
<article class="doc">
<h1 class="page">Installing Apicurio Registry Operator using the OperatorHub</h1>
<div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>This chapter explains how to install Apicurio Registry Operator on Kubernetes or OpenShift.
It also shows how to install the Strimzi or Java Persistence API (PostgreSQL) storage option:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="#install-registry-operator-olm-on-kubernetes">Installing Apicurio Registry Operator using the OperatorHub on Kubernetes</a></p>
</li>
<li>
<p><a href="#install-registry-operator-olm">Installing Apicurio Registry Operator using Operator Lifecycle Manager</a></p>
</li>
<li>
<p><a href="#install-kafka-operatorhub">Installing Strimzi storage using OpenShift OperatorHub</a></p>
</li>
<li>
<p><a href="#install-postgresql-operatorhub">Installing PostgreSQL database storage using OpenShift OperatorHub</a></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="install-registry-operator-olm-on-kubernetes"><a class="anchor" href="#install-registry-operator-olm-on-kubernetes"></a>Installing Apicurio Registry Operator using the OperatorHub on Kubernetes</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This chapter focuses on installation procedures for OpenShift using OperatorHub UI.
If you are deploying to Kubernetes, you can use command line tools to install Operator Lifecycle Manager (OLM), and instruct it to deploy the Apicurio Registry or other Operators.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="_images/operator-hub-search-ar.png" alt="operator hub search ar">
</div>
</div>
<div class="ulist">
<div class="title">Prerequisites</div>
<ul>
<li>
<p>You must have cluster administrator access to a Kubernetes cluster.</p>
</li>
</ul>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>Go to <a href="https://operatorhub.io/operator/apicurio-registry">OperatorHub.io - Apicurio Registry</a> page.</p>
</li>
<li>
<p>Select the <strong>Version</strong> you want to install</p>
</li>
<li>
<p>Read the information about the Operator, and click <strong>Install</strong>.</p>
</li>
<li>
<p>Follow the instructions on the installation page.</p>
</li>
</ol>
</div>
</div>
</div>
<div class="sect1">
<h2 id="install-registry-operator-olm"><a class="anchor" href="#install-registry-operator-olm"></a>Installing Apicurio Registry Operator using Operator Lifecycle Manager</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The recommended way to install Apicurio Registry Operator is to use the <a href="https://docs.openshift.com/container-platform/latest/operators/understanding/olm/olm-understanding-olm.html">Operator Lifecycle Manager</a> (OLM), which can automatically manage the Operator deployment and upgrades.</p>
</div>
<div class="paragraph">
<p>Apicurio Registry Operator is released to the <a href="https://docs.openshift.com/container-platform/latest/operators/understanding/olm-understanding-operatorhub.html">OperatorHub</a>, so if your cluster has the OLM and OperatorHub installed, the cluster administrator can use the OpenShift web console to deploy the Apicurio Registry Operator:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="_images/operator-hub-search-sr.png" alt="operator hub search sr">
</div>
</div>
<div class="ulist">
<div class="title">Prerequisites</div>
<ul>
<li>
<p>You must have cluster administrator access to an OpenShift cluster.</p>
</li>
</ul>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>In the OpenShift Container Platform web console, log in using an account with cluster administrator privileges.</p>
</li>
<li>
<p>Create a new OpenShift project:</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>In the left navigation menu, click <strong>Home</strong> &gt; <strong>Project</strong> &gt; <strong>Create Project</strong>.</p>
</li>
<li>
<p>Enter a project name, for example, <code>my-project</code>, and click <strong>Create</strong>.</p>
</li>
</ol>
</div>
</li>
<li>
<p>In the left navigation menu, click <strong>Operators</strong> &gt; <strong>OperatorHub</strong>.</p>
</li>
<li>
<p>In the <strong>Filter by keyword</strong> text box, enter <code>registry</code> to find the <strong>Apicurio Registry Operator</strong>.</p>
</li>
<li>
<p>Read the information about the Operator, and click <strong>Install</strong>.
This displays the <strong>Create Operator Subscription</strong> page.</p>
</li>
<li>
<p>Select your subscription settings, for example:</p>
<div class="ulist">
<ul>
<li>
<p><strong>Installation Mode</strong> &gt; <strong>A specific namespace on the cluster</strong> &gt; <strong>my-project</strong></p>
</li>
<li>
<p><strong>Update Channel</strong> &gt; <strong>2.x</strong></p>
</li>
<li>
<p><strong>Approval Strategy</strong> &gt; <strong>Automatic</strong></p>
</li>
</ul>
</div>
</li>
<li>
<p>Click <strong>Subscribe</strong>.
This displays the <strong>Operators</strong> &gt; <strong>Installed Operators</strong> page.</p>
</li>
<li>
<p>Wait a few moments until the <strong>Status</strong> for the Apicurio Registry Operator displays <strong>Succeeded</strong> and the subscription is <strong>Up to Date</strong>.</p>
</li>
</ol>
</div>
<div class="ulist">
<div class="title">Additional resources</div>
<ul>
<li>
<p><a href="https://docs.openshift.com/container-platform/4.6/operators/olm-adding-operators-to-cluster.html">Adding Operators to an OpenShift cluster</a></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="install-kafka-operatorhub"><a class="anchor" href="#install-kafka-operatorhub"></a>Installing Strimzi storage using OpenShift OperatorHub</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The recommended Kafka storage option requires that you provide connection information to a Kafka cluster. You can use any Kafka cluster with Kafka support. However, it is recommended to use the Strimzi Operator to provide and maintain a Kafka cluster for you.</p>
</div>
<div class="paragraph">
<p>If you do not already have Kafka installed, you can install the Strimzi Operator on your OpenShift cluster from the <a href="https://docs.openshift.com/container-platform/latest/operators/understanding/olm-understanding-operatorhub.html">OperatorHub</a>.</p>
</div>
<div class="ulist">
<div class="title">Prerequisites</div>
<ul>
<li>
<p>You must have cluster administrator access to an OpenShift cluster</p>
</li>
</ul>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>In the OpenShift Container Platform web console, log in using an account with cluster administrator privileges.</p>
</li>
<li>
<p>Change to the OpenShift project in which Apicurio Registry is installed. For example, from the <strong>Project</strong> drop-down, select <code>my-project</code>.</p>
</li>
<li>
<p>In the left navigation menu, click <strong>Operators</strong> &gt; <strong>OperatorHub</strong>.</p>
</li>
<li>
<p>In the <strong>Filter by keyword</strong> text box, enter <code>Strimzi</code> to find the <strong>Strimzi</strong> Operator.</p>
</li>
<li>
<p>Read the information about the Operator, and click <strong>Install</strong>. This displays the <strong>Create Operator Subscription</strong> page.</p>
</li>
<li>
<p>Select your subscription settings, for example:</p>
<div class="ulist">
<ul>
<li>
<p><strong>Installation Mode</strong> &gt; <strong>A specific namespace on the cluster</strong> &gt; <strong>my-project</strong></p>
</li>
<li>
<p><strong>Update Channel</strong> &gt; <strong>stable</strong></p>
</li>
<li>
<p><strong>Approval Strategy</strong> &gt; <strong>Manual</strong></p>
</li>
</ul>
</div>
</li>
<li>
<p>Click <strong>Subscribe</strong>. This displays the <strong>Operators</strong> &gt; <strong>Installed Operators</strong> page.</p>
</li>
<li>
<p>Wait a few moments until the <strong>Status</strong> for the Strimzi Operator displays <strong>Succeeded</strong> and the subscription is <strong>Up to Date</strong>.</p>
</li>
</ol>
</div>
<div class="ulist">
<div class="title">Additional resources</div>
<ul>
<li>
<p><a href="https://docs.openshift.com/container-platform/4.6/operators/olm-adding-operators-to-cluster.html">Adding Operators to an OpenShift cluster</a></p>
</li>
<li>
<p><a href="https://access.redhat.com/documentation/en-us/red_hat_amq/7.7/html/using_amq_streams_on_openshift/index?">Using AMQ Streams on OpenShift</a></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="install-postgresql-operatorhub"><a class="anchor" href="#install-postgresql-operatorhub"></a>Installing PostgreSQL database storage using OpenShift OperatorHub</h2>
<div class="sectionbody">
<div class="paragraph">
<p>One of the available storage options requires that you provide connection information to a PostgreSQL database.
You can use any PostgreSQL database available on your OpenShift cluster, but it is recommended to use <a href="https://docs.openshift.com/container-platform/latest/operators/understanding/olm-understanding-operatorhub.html">OperatorHub</a> to choose and install an Operator that can manage a PostgreSQL database for you.</p>
</div>
<div class="paragraph">
<p>You can install your preferred PostgresQL Operator, but this section shows how to install the <strong>PostgreSQL Operator by Dev4Ddevs.com</strong> and create a new database for Apicurio Registry.</p>
</div>
<div class="ulist">
<div class="title">Prerequisites</div>
<ul>
<li>
<p>You must have cluster administrator access to an OpenShift cluster.</p>
</li>
</ul>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>In the OpenShift Container Platform web console, log in using an account with cluster administrator privileges.</p>
</li>
<li>
<p>Change to the OpenShift project in which Apicurio Registry is installed. For example, from the <strong>Project</strong> drop-down, select <code>my-project</code>.</p>
</li>
<li>
<p>In the left navigation menu, click <strong>Operators</strong> &gt; <strong>OperatorHub</strong>.</p>
</li>
<li>
<p>In the <strong>Filter by keyword</strong> text box, enter <code>PostgreSQL</code> to find an Operator suitable for your environment, for example, <strong>PostgreSQL Operator by Dev4Ddevs.com</strong> or <strong>Crunchy PostgreSQL for OpenShift</strong>.</p>
</li>
<li>
<p>Read the information about the Operator, and click <strong>Install</strong>. This displays the <strong>Create Operator Subscription</strong> page.</p>
</li>
<li>
<p>Select your subscription settings, for example:</p>
<div class="ulist">
<ul>
<li>
<p><strong>Installation Mode</strong>: Select one of the following:</p>
<div class="ulist">
<ul>
<li>
<p><strong>All namespaces on the cluster (default)</strong></p>
</li>
<li>
<p><strong>A specific namespace on the cluster</strong>  and then <strong>my-project</strong></p>
</li>
</ul>
</div>
</li>
<li>
<p><strong>Update Channel</strong> &gt; <strong>stable</strong></p>
</li>
<li>
<p><strong>Approval Strategy</strong>: Select <strong>Automatic</strong> or <strong>Manual</strong></p>
</li>
</ul>
</div>
</li>
<li>
<p>Click <strong>Subscribe</strong>. This displays the <strong>Operators</strong> &gt; <strong>Installed Operators</strong> page.</p>
</li>
<li>
<p>Wait a few moments until the <strong>Status</strong> for the PostgreSQL Operator displays <strong>Succeeded</strong> and the subscription is <strong>Up to Date</strong>.</p>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
You must read the documentation from your chosen <strong>PostgreSQL</strong> Operator for details on how to create and manage your database.
</td>
</tr>
</table>
</div>
</li>
<li>
<p>Create a PostgreSQL database for your Apicurio Registry storage. For example, click <strong>Installed Operators</strong> &gt; <strong>PostgreSQL Operator by Dev4Ddevs.com</strong> &gt; <strong>Create database</strong> &gt; <strong>YAML</strong>.</p>
</li>
<li>
<p>Edit the database settings as follows:</p>
<div class="ulist">
<ul>
<li>
<p><code>name</code>: Change the value to <code>registry</code></p>
</li>
<li>
<p><code>image</code>: Change the value to <code>centos/postgresql-10-centos7</code></p>
</li>
</ul>
</div>
</li>
<li>
<p>Edit any other database settings as needed depending on your environment, for example:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-yaml hljs" data-lang="yaml">apiVersion: postgresql.dev4devs.com/v1alpha1
kind: Database
metadata:
  name: registry
  namespace: my-project
spec:
  databaseCpu: 30m
  databaseCpuLimit: 60m
  databaseMemoryLimit: 512Mi
  databaseMemoryRequest: 128Mi
  databaseName: example
  databaseNameKeyEnvVar: POSTGRESQL_DATABASE
  databasePassword: postgres
  databasePasswordKeyEnvVar: POSTGRESQL_PASSWORD
  databaseStorageRequest: 1Gi
  databaseUser: postgres
  databaseUserKeyEnvVar: POSTGRESQL_USER
  image: centos/postgresql-10-centos7
  size: 1</code></pre>
</div>
</div>
</li>
<li>
<p>Click <strong>Create Database</strong>, and wait until the database is created.</p>
</li>
</ol>
</div>
<div class="ulist">
<div class="title">Additional resources</div>
<ul>
<li>
<p><a href="https://access.crunchydata.com/documentation/postgres-operator/4.5.0/quickstart/">Crunchy PostgreSQL Operator QuickStart</a></p>
</li>
</ul>
</div>
</div>
</div>
</article>
<aside class="toc sidebar" data-title="Contents" data-levels="2">
  <div class="toc-menu"></div>
</aside>
  </div>
</main>
</div>
<footer class="footer">
  <p>Copyright Â© 2020 Red Hat, Inc. All rights reserved.</p>
</footer>
<script src="../../_/js/site.js"></script>
<script async src="../../_/js/vendor/highlight.js"></script>
  </body>
</html>
